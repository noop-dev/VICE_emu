
;-----------------------------------------------------------------------------

    !ct scr

    * = $0801

    ; BASIC stub: "1 SYS 2061"
    !by $0b,$08,$01,$00,$9e,$32,$30,$36,$31,$00,$00,$00

;-----------------------------------------------------------------------------

start:

    sei
    lda #$35
    sta $01

    jmp main

    * = $0900
    !byte %00000101
    !byte %00000101
    !byte %00000101
    !byte %00000101
    !byte %10101111
    !byte %10101111
    !byte %10101111
    !byte %10101111

    * = $0980
hsprite1:
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    !byte %00000000,%00001111,%11111111
    
    * = $09c0
hsprite2:
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    * = $0a00
msprite1:
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    !byte %00000001,%01011010,%10111111
    * = $0a40
msprite2:
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000
    !byte %00000000,%00000000,%00000000

    !byte %01010101,%01010101,%01010101
    !byte %01010101,%01010101,%01010101
    !byte %01010101,%01010101,%01010101
    !byte %01010101,%01010101,%01010101
    !byte %01010101,%01010101,%01010101
    
    !byte %10101010,%10101010,%10101010
    !byte %10101010,%10101010,%10101010
    !byte %10101010,%10101010,%10101010
    !byte %10101010,%10101010,%10101010
    !byte %10101010,%10101010,%10101010

    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
    !byte %11111111,%11111111,%11111111
;-----------------------------------------------------------------------------

printscreen:
    ldx #0
lp:
    lda #$20
    sta $0400,x
    sta $0500,x
    sta $0600,x
    sta $06e8,x
    lda #6 | 8
    sta $d800,x
    sta $d900,x
    sta $da00,x
    sta $dae8,x
    inx
    bne lp
    rts

;-----------------------------------------------------------------------------

main:

    lda #1
    sta $d020
    lda #0
    sta $d021

    lda #$d8
    sta $d016
    lda #2
    sta $d022
    lda #5
    sta $d023
    lda #$12
    sta $d018

    jsr printscreen
loop:
    lda #$ff
    sta $d015
    sta $d017
    sta $d01d
    lda #0
    sta $d01c
    lda #%00110101
    sta $d01b

    lda #10
    sta $d027
    sta $d028
    sta $d029
    sta $d02a
    lda #14
    sta $d02b
    sta $d02c
    sta $d02d
    sta $d02e
    lda #7
    sta $d025
    lda #13
    sta $d026

    lda #hsprite1 / 64
    sta $07f8
    sta $07f9
    sta $07fa
    sta $07fb
    lda #hsprite2 / 64
    sta $07fc
    sta $07fd
    sta $07fe
    sta $07ff

    lda #50+(0*56)
    sta $d000+(0*2)
    sta $d000+(4*2)
    lda #50+(1*56)
    sta $d000+(1*2)
    sta $d000+(5*2)
    lda #50+(2*56)
    sta $d000+(2*2)
    sta $d000+(6*2)
    lda #50+(3*56)
    sta $d000+(3*2)
    sta $d000+(7*2)

    lda #80
    sta $d001+(0*2)
    sta $d001+(1*2)
    sta $d001+(2*2)
    sta $d001+(3*2)
    sta $d001+(4*2)
    sta $d001+(5*2)
    sta $d001+(6*2)
    sta $d001+(7*2)

    lda #140
    cmp $d012
    bcs *-3

    lda #$ff
    sta $d01c
    
    lda #150
    sta $d001+(0*2)
    sta $d001+(1*2)
    sta $d001+(2*2)
    sta $d001+(3*2)
    sta $d001+(4*2)
    sta $d001+(5*2)
    sta $d001+(6*2)
    sta $d001+(7*2)

    lda #msprite1 / 64
    sta $07f8
    sta $07f9
    sta $07fa
    sta $07fb
    lda #msprite2 / 64
    sta $07fc
    sta $07fd
    sta $07fe
    sta $07ff
    
    lda #$f8
    lda $d012
    bmi *-3

    jmp loop

;-----------------------------------------------------------------------------

screen:
         ;0123456789012345678901234567890123456789
    !scr "                                        "
    !scr "                                        "
    !scr "                                        " ;1
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        " ;5
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "
    !scr "                                        "

    